{"version":3,"sources":["webpack:///webpack/bootstrap 16b14004b843811bc5e7","webpack:///./app.js","webpack:///../src/filofax.js","webpack:///../src/stacktrace.js","webpack:///../src/async.js","webpack:///../src/stack-chain.js","webpack:///../src/format.js","webpack:///../src/hook.js","webpack:///../src/patches/timers.js","webpack:///../src/stackframe.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 16b14004b843811bc5e7\n **/","var Filofax = require('../src/filofax');\nvar trace = new Filofax();\n\nclass A {\n\n  constructor(name) {\n    trace.shot();\n    this.name = name;\n    console.log(`${this.name} love apple!`);\n  }\n\n  eat(type) {\n    setTimeout(function () {\n      trace.shot();\n      console.log('-------start eating apple-----------')\n      for(var item of type) {\n        console.log(`${this.name} eat ${item} apple!`);\n      }\n      console.log('-------end eating apple-------------')\n    }, 30);\n  }\n\n}\n\nclass B {\n\n  constructor(name) {\n    trace.shot();\n    this.name = name;\n    console.log(`${this.name} love pear!`);\n  }\n\n  eat(type) {\n    trace.shot();\n    console.log('-------start eating pear------------')\n    for(var item of type) {\n      console.log(`${this.name} eat ${item} pear!`);\n    }\n    console.log('-------end eating pear--------------')\n  }\n}\n\nclass C {\n\n  constructor() {\n    this.children = [\n      {\n        name: 'Rose',\n        love: 'apple',\n        type: ['red', 'green', 'yellow']\n      },\n      {\n        name: 'Tom',\n        love: 'pear',\n        type: ['China', 'Japan']\n      },\n      {\n        name: 'Jack',\n        love: 'apple',\n        type: ['small', 'big']\n      }\n    ];\n    this.fruits = [];\n  }\n\n  share() {\n    trace.shot({type: 'root'});\n    for(var item of this.children) {\n      switch (item.love) {\n        case 'apple':\n          var fruit = new A(item.name);\n          break;\n        case 'pear':\n          var fruit = new B(item.name);\n          break;\n        default:\n          break;\n      }\n      if (fruit) {\n        this.fruits.push(fruit);\n      }\n    }\n  }\n\n  eat() {\n    trace.shot({type: 'root'});\n    for(var fruit of this.fruits) {\n      var name = fruit.name;\n      for(var item of this.children) {\n        if (item.name === name) {\n          fruit.eat(item.type);\n          continue;\n        }\n      }\n    }\n  }\n\n  fake() {\n    trace.shot({type: 'root'});\n    throw new Error('school fake error');\n  }\n\n}\n\nwindow.onerror = function (msg, url, line, column, err) {\n  trace.shot(err);\n  trace.dump();\n}\n\nvar school = new C();\nschool.share();\nschool.eat();\n// trigger error\nschool.fake();\n\n\n\n/** WEBPACK FOOTER **\n ** ./app.js\n **/","var StackTrace = require('./stacktrace');\n\nclass Filofax {\n\n  constructor(opts) {\n    // 时间生命周期 1 分钟\n    this.lifetime = 1*60*1000;\n\n    // 单个时间滑窗 10s\n    this.shottime = 10*1000;\n\n    // 滑窗个数\n    this.maxSize = this.lifetime/this.shottime;\n\n    this.stack = [];\n    for(var i = 0, len = this.maxSize - 1; i <= len; i++) {\n      // 单个时间滑窗对象\n      this.stack[i] = {};\n    }\n\n    this.startime = performance.now();\n  }\n\n  shot(opts) {\n    var now = performance.now();\n    var interval = now - this.startime;\n\n    var cursor = Math.floor((interval / this.shottime) % this.maxSize);\n\n    var trace = this.stack[cursor];\n\n    if (opts instanceof Error) {\n      var frame = StackTrace.parse(opts);\n    } else {\n      var frame = StackTrace.get(opts);\n    }\n\n    if (trace) {\n      var keys = Object.keys(trace);\n      if (keys.indexOf(frame.rootToken) === -1) {\n        trace[frame.rootToken] = [];\n      }\n      trace[frame.rootToken].push(frame.toString());\n    }\n\n  }\n\n  dump() {\n    console.log(this.stack);\n  }\n\n  upload() {\n    \n  }\n\n}\n\nmodule.exports = Filofax;\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/filofax.js\n **/","/**\n * 1. format function callsite to StackFrame Object\n * 2. format Error Object to StackFrame Object\n */\n\n// hook async\nrequire('./async');\nError.stackTraceLimit = Infinity;\nvar StackFrame = require('./stackframe');\nvar lastStackFrame = null;\n\nclass StackTrace {\n\n  static makeToken(str) {\n    return `${str}:${performance.now()}`;\n  }\n  \n  static get(opts) {\n    var err = new Error();\n    Error.captureStackTrace(err, arguments.callee);\n    var stack = err.callSite.mutated;\n    console.log(stack);\n\n    for(var item of stack) {\n      console.log(item.getTypeName(), item.getFunctionName(), item.getLineNumber());\n    }\n    var firstCaller = stack[1];\n    var functionName = firstCaller.getFunctionName();\n\n    if (opts && opts.type === 'root') {\n      var rootToken =  StackTrace.makeToken(functionName);\n      var parentToken = null;\n      var token = rootToken;\n    } else {\n      var interval = performance.now() - lastStackFrame.time;\n      if (interval >= 50000) {\n        // TODO: 大于 50ms 的异步、定时任务情况处理\n      } else {\n        var rootToken = lastStackFrame.rootToken;\n        var parentToken = lastStackFrame.token;\n        var token = StackTrace.makeToken(functionName);\n      }\n    }\n\n    var func = firstCaller.getFunction();\n    var args = Array.prototype.slice.call(func.arguments, 0);\n    var sf = new StackFrame({\n      typeName: firstCaller.getTypeName(),\n      functionName: firstCaller.getFunctionName(),\n      fileName: firstCaller.getFileName(),\n      args: args,\n      lineNumber: firstCaller.getLineNumber(),\n      columnNumber: firstCaller.getColumnNumber(),\n      isConstructor: firstCaller.isConstructor(),\n      isToplevel: firstCaller.isToplevel(),\n      rootToken: rootToken,\n      parentToken: parentToken,\n      token: token\n    });\n\n    lastStackFrame = sf;\n    console.log(sf.toString());\n    return sf;\n  }\n  \n  static parse(err) {\n    // var V8_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var V8_STACK_REGEXP = /at (?:(.+)\\s+\\()?(?:(.+?):(\\d+):(\\d+)|([^)]+))\\)?/;\n    var TYPE_FUNCTION_REGEXP = /([^\\.]+)(?:\\.(.+))?/;\n    var errStack = err.stack.split('\\n');\n\n    var errInfo = errStack[0];\n    var firstCaller = errStack[1];\n\n    var match = firstCaller.match(V8_STACK_REGEXP);\n\n    if (match) {\n      var typeMatch = match[1].match(TYPE_FUNCTION_REGEXP);\n      var typeName = typeMatch[1];\n      var functionName = typeMatch[2];\n\n      var fileName = match[2];\n      var lineNumber = parseInt(match[3], 10);\n      var columnNumber = parseInt(match[4], 10);\n    } else {\n      var typeName = '';\n      var functionName = '';\n      var fileName = '';\n      var lineNumber = 0;\n      var columnNumber = 0;\n    }\n\n    var sf = new StackFrame({\n      prefix: errInfo,\n      typeName: typeName,\n      functionName: functionName,\n      fileName: fileName,\n      args: [],\n      lineNumber: lineNumber,\n      columnNumber: columnNumber,\n      rootToken: lastStackFrame.rootToken,\n      parentToken: lastStackFrame.token,\n      token: StackTrace.makeToken(functionName)\n    });\n\n    console.log(sf.toString());\n    return sf;\n  }\n}\n\nmodule.exports = StackTrace;\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/stacktrace.js\n **/","const chain = require('./stack-chain');\nvar AsyncHook = require('./hook');\nvar asyncHook = new AsyncHook();\n\nlet callSitesForPreviuseTicks = null;\nconst stacks = new Map();\n\nasyncHook.add({\n  init: asyncInit,\n  pre: asyncBefore,\n  post: asyncAfter,\n  destroy: asyncDestroy\n});\n\nasyncHook.enable();\n\nchain.extend.attach(function (error, frames) {\n  frames.push.apply(frames, callSitesForPreviuseTicks);\n  return frames;\n});\n\nfunction getCallSites(skip) {\n  const limit = Error.stackTraceLimit;\n\n  Error.stackTraceLimit = limit + skip;\n  const stack = chain.callSite({\n    extend: false,\n    filter: true,\n    slice: skip\n  });\n  Error.stackTraceLimit = limit;\n\n  return stack;\n}\n\nfunction asyncInit(uid, handle, parentUid) {\n  const trace = getCallSites(2);\n\n  // Add all the callSites from previuse ticks\n  trace.push.apply(trace, parentUid === null ? callSitesForPreviuseTicks : stacks.get(parentUid));\n\n  // Cut the trace so it don't contain callSites there won't be shown anyway\n  // because of Error.stackTraceLimit\n  trace.splice(Error.stackTraceLimit);\n\n  // `trace` now contains callSites from this ticks and all the ticks leading\n  // up to this event in time\n  stacks.set(uid, trace);\n}\n\nfunction asyncBefore(uid) {\n  // restore previuseTicks for this specific async action, thereby allowing it\n  // to become a part of a error `stack` string\n  callSitesForPreviuseTicks = stacks.get(uid);\n  console.log(callSitesForPreviuseTicks);\n}\n\nfunction asyncAfter(uid) {\n  // clear `callSitesForPreviuseTicks`. In some cases the such as Promises the\n  // handle context is lost. So to prevent callSites leaking into the wrong\n  // stack trace, clear `callSitesForPreviuseTicks` here.\n  callSitesForPreviuseTicks = null;\n}\n\nfunction asyncDestroy(uid) {\n  stacks.delete(uid);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/async.js\n **/","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n}\n\nvar SHORTCUT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCUT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCUT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n};\n\nStackFormater.prototype._backup = function () {\n  if (this._formater === defaultFormater) {\n    this._previous = undefined;\n  } else {\n    this._previous = this._formater;\n  }\n};\n\nStackFormater.prototype._roolback = function () {\n  this.replace(this._previous);\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCUT_CALLSITE) return originalFrames;\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  return chain.format._formater(error, frames);\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/stack-chain.js\n **/","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(error.toString());\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/format.js\n **/","const uidSymbol = Symbol('async-hook-uid');\nconst patchs = {\n  'timers': require('./patches/timers.js')\n};\n\nclass AsyncHook {\n  \n  constructor() {\n    this.enabled = false;\n    this.counter = 0;\n\n    const initFns = this.initFns = [];\n    const preFns = this.preFns = [];\n    const postFns = this.postFns = [];\n    const destroyFns = this.destroyFns = [];\n\n    this.init = function (uid, parent) {\n      this[uidSymbol] = uid;\n      if (parent !== null) parent = parent[uidSymbol];\n      // call hooks\n      for (const hook of initFns) {\n        hook(uid, this, parent);\n      }\n    };\n\n    this.pre = function () {\n      const uid = this[uidSymbol];\n      // call hooks\n      for (const hook of preFns) {\n        hook(uid, this);\n      }\n    };\n\n    this.post = function () {\n      const uid = this[uidSymbol];\n      // call hooks\n      for (const hook of postFns) {\n        hook(uid, this);\n      }\n    };\n\n    this.destroy = function (uid) {\n      // call hooks\n      for (const hook of destroyFns) {\n        hook(uid);\n      }\n    };\n\n    for (const key of Object.keys(patchs)) {\n      patchs[key].call(this);\n    }\n  }\n\n  add(hooks) {\n    if (hooks.init) this.initFns.push(hooks.init);\n    if (hooks.pre) this.preFns.push(hooks.pre);\n    if (hooks.post) this.postFns.push(hooks.post);\n    if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n  }\n\n  static removeElement(array, item) {\n    const index = array.indexOf(item);\n    if (index === -1) return;\n    array.splice(index, 1);\n  }\n\n  remove(hooks) {\n    if (hooks.init) AsyncHook.removeElement(this.initFns, hooks.init);\n    if (hooks.pre) AsyncHook.removeElement(this.preFns, hooks.pre);\n    if (hooks.post) AsyncHook.removeElement(this.postFns, hooks.post);\n    if (hooks.destroy) AsyncHook.removeElement(this.destroyFns, hooks.destroy);\n  }\n\n  enable() {\n    this.enabled = true;\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n}\n\nmodule.exports = AsyncHook;\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/hook.js\n **/","const timers = window;\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\n\nmodule.exports = function patch() {\n  patchTimer(this, this, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this, this, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = Array.from(arguments);\n    const callback = args[0];\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId;\n\n    // call the init hook\n    hooks.init.call(handle, uid, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle);\n\n      callback.apply(this, arguments);\n\n      // call the post hook\n      hooks.post.call(handle);\n\n      // call thie destroy hook if the callback will only be called once\n      if (singleCall) {\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/patches/timers.js\n **/","/**\n * 自定义的 stack frame 对象 \n * 类似于 V8 https://github.com/v8/v8/wiki/Stack%20Trace%20API\n */\n\nclass StackFrame {\n\n  constructor(obj) {\n    if (obj instanceof Object) {\n      // string\n      this.prefix = obj.prefix ? `${obj.prefix}@` : '';\n      this.typeName = obj.typeName || 'Object';\n      this.functionName = obj.functionName || '';\n      this.fileName     = obj.fileName || '';\n      // 后台解析 source-map\n      this.source       = obj.source || '';\n\n      // array\n      this.args = obj.args || [];\n\n      // number\n      this.lineNumber   = StackFrame.isNumber(obj.lineNumber) ? obj.lineNumber : 0;\n      this.columnNumber = StackFrame.isNumber(obj.columnNumber) ? obj.columnNumber : 0;\n\n      // boolean\n      this.isConstructor = obj.isConstructor;\n      this.isToplevel    = obj.isToplevel;\n\n      // token\n      this.rootToken = obj.rootToken || null;\n      this.parentToken = obj.parentToken || null;\n      this.token = obj.token || null;\n\n      // init hrt time\n      if (window.performance) {\n        this.time = window.performance.now();\n      } else {\n        this.time = null;\n      }\n      \n    } else {\n      console.warn('stackframe arguments must be object!');\n    }\n  }\n\n  static isNumber(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  }\n\n  toString() {\n    var typeName = this.getTypeName() || '';\n    var functionName = this.getFunctionName() || '{anonymous}';\n    var args = (this.getArgs()).join(',');\n    var fileName = this.getFileName();\n    var lineNumber = this.getLineNumber();\n    var columnNumber = this.getColumnNumber();\n    var rootToken = this.getRootToken();\n    var parentToken = this.getParentToken();\n    var token = this.getToken();\n\n    return `${this.prefix}${typeName}.${functionName}(${args})@${fileName}:${lineNumber}:${columnNumber}@${rootToken}-${parentToken}-${token}`;\n  }\n\n  getTypeName() {\n    return this.typeName;\n  }\n\n  getFunctionName() {\n    return this.functionName;\n  }\n\n  getFileName() {\n    return this.fileName;\n  }\n\n  getSource() {\n    return this.source;\n  }\n\n  getArgs() {\n    return this.args;\n  }\n\n  getLineNumber() {\n    return this.lineNumber;\n  }\n\n  getColumnNumber() {\n    return this.columnNumber;\n  }\n\n  isToplevel() {\n    return this.isToplevel;\n  }\n\n  isConstructor() {\n    return this.isConstructor;\n  }\n\n  getRootToken() {\n    return this.rootToken;\n  }\n\n  getParentToken() {\n    return this.parentToken;\n  }\n\n  getToken() {\n    return this.token;\n  }\n}\n\nmodule.exports = StackFrame;\n\n\n\n/** WEBPACK FOOTER **\n ** ../src/stackframe.js\n **/"],"sourceRoot":""}